<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<title>Markerless AR Solar System (Final 100x)</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:black;
  font-family:sans-serif;
}

/* ================= A-SCENE ================= */
a-scene{
  position:fixed;
  inset:0;
}

/* ================= INFO PANEL ================= */
#info{
  position:fixed;
  background:rgba(0,0,0,.85);
  color:white;
  border-radius:16px;
  display:none;
  z-index:10;
  text-align:center;
  max-width:90%;
}

/* ================= UI COMMON ================= */
#ui{
  position:fixed;
  display:flex;
  z-index:10;
}

#ui button{
  border-radius:50%;
  border:none;
  background:#222;
  color:white;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:0.2s;
}

#ui button:active{
  transform:scale(0.9);
}

/* ================= INTRO ================= */
#intro{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at top,#111,#000);
  color:white;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:999;
  text-align:center;
}

#intro h1{
  margin-bottom:10px;
}

#intro p{
  opacity:.85;
  margin-bottom:30px;
}

#intro button{
  border:none;
  border-radius:30px;
  background:#1e90ff;
  color:white;
  cursor:pointer;
}

/* ================================================= */
/* ======================= PC ======================= */
/* ================================================= */
@media (min-width: 769px){

  #ui{
    bottom:25px;
    left:50%;
    transform:translateX(-50%);
    flex-direction:row;
    gap:20px;
  }

  #ui button{
    width:64px;
    height:64px;
    font-size:28px;
  }

  #info{
    bottom:120px;
    left:50%;
    transform:translateX(-50%);
    padding:16px 22px;
  }

  #intro h1{
    font-size:32px;
  }

  #intro p{
    font-size:16px;
  }

  #intro button{
    padding:14px 28px;
    font-size:20px;
  }
}

/* ================================================= */
/* ===================== MOBILE ===================== */
/* ================================================= */
@media (max-width: 768px){

  #ui{
    bottom:16px;
    left:50%;
    transform:translateX(-50%);
    flex-wrap:wrap;
    width:92%;
    justify-content:center;
    gap:12px;
    bottom: calc(14px + env(safe-area-inset-bottom));
  }

  #ui button{
    width:48px;
    height:48px;
    font-size:20px;
  }

  #info{
    bottom:95px;
    left:50%;
    transform:translateX(-50%);
    padding:14px 18px;
    font-size:15px;
  }

  #intro h1{
    font-size:26px;
  }

  #intro p{
    font-size:15px;
  }

  #intro button{
    padding:12px 24px;
    font-size:18px;
  }
}

</style>
</head>

<body>

<div id="info">
  
</div>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏®‡∏£ -->
<div id="ui">
  <button onclick="prevPlanet()">‚óÄ</button>
  <button onclick="nextPlanet()">‚ñ∂</button>
  <button onclick="togglePlay()">‚èØ</button>
  <button onclick="toggleTeacher()">üéì</button>
  <button onclick="zoomIn()">Ôºã</button>
  <button onclick="zoomOut()">Ôºç</button>
</div>

<a-scene
  embedded
  vr-mode-ui="enabled:false"
  renderer="antialias:true"
  arjs="sourceType:webcam; videoTexture:true; debugUIEnabled:false">

<!-- CAMERA -->
<a-entity id="cameraRig" position="0 1.6 60">
  <a-camera look-controls>
    <a-entity
      cursor="rayOrigin: mouse"
      raycaster="objects: .planet">
    </a-entity>
  </a-camera>
</a-entity>

<!-- LIGHT -->
<a-light type="ambient" intensity="1.2"></a-light>
<a-light type="directional" position="200 300 200" intensity="1"></a-light>

<!-- ASSETS -->
<a-assets>
  <a-asset-item id="sun" src="sun.gltf"></a-asset-item>
  <a-asset-item id="mercury" src="mercurius.gltf"></a-asset-item>
  <a-asset-item id="venus" src="venus.gltf"></a-asset-item>
  <a-asset-item id="earth" src="earth.gltf"></a-asset-item>
  <a-asset-item id="mars" src="mars.gltf"></a-asset-item>
  <a-asset-item id="jupiter" src="jupiter.gltf"></a-asset-item>
  <a-asset-item id="saturn" src="saturn.gltf"></a-asset-item>
  <a-asset-item id="uranus" src="uranus.gltf"></a-asset-item>
  <a-asset-item id="neptune" src="neptune.gltf"></a-asset-item>
</a-assets>

<!-- SOLAR SYSTEM -->
<a-entity id="solarSystem">

  <a-entity class="planet" gltf-model="#sun"
    position="0 1 -2000"
    scale="4 4 4"
    data-name="‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå"
    data-info="‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞">
  </a-entity>

  <a-entity class="planet" gltf-model="#mercury"
    position="1000 3 -2000"
    scale="5 5 5"
    data-name="‡∏î‡∏≤‡∏ß‡∏û‡∏∏‡∏ò"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"></a-entity>

  <a-entity class="planet" gltf-model="#venus"
    position="2000 3 -2000"
    scale="2 2 2"
    data-name="‡∏î‡∏≤‡∏ß‡∏®‡∏∏‡∏Å‡∏£‡πå"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"></a-entity>

  <a-entity class="planet" gltf-model="#earth"
    position="3000 3 -2000"
    scale="8 8 8"
    data-name="‡πÇ‡∏•‡∏Å"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï"></a-entity>

  <a-entity class="planet" gltf-model="#mars"
    position="4000 -5 -2000"
    scale="6 6 6"
    data-name="‡∏î‡∏≤‡∏ß‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏µ‡πÅ‡∏î‡∏á"></a-entity>

  <a-entity class="planet" gltf-model="#jupiter"
    position="5500 3 -2000"
    scale="2.5 2.5 2.5"
    data-name="‡∏î‡∏≤‡∏ß‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞">
  </a-entity>

  <a-entity class="planet" gltf-model="#saturn"
    position="7000 3 -2000"
    scale="9 9 9"
    data-name="‡∏î‡∏≤‡∏ß‡πÄ‡∏™‡∏≤‡∏£‡πå"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô"></a-entity>

  <a-entity class="planet" gltf-model="#uranus"
    position="8500 1 -2000"
    scale="0.2 0.2 0.2"
    data-name="‡∏î‡∏≤‡∏ß‡∏¢‡∏π‡πÄ‡∏£‡∏ô‡∏±‡∏™"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏Å‡∏ô‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏°‡∏≤‡∏Å"></a-entity>

  <a-entity class="planet" gltf-model="#neptune"
    position="10000 1 -2000"
    scale="2 2 2"
    data-name="‡∏î‡∏≤‡∏ß‡πÄ‡∏ô‡∏õ‡∏à‡∏π‡∏ô"
    data-info="‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏Å‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î"></a-entity>

</a-entity>

<script>
const planets = document.querySelectorAll(".planet");
const cameraRig = document.getElementById("cameraRig");
const info = document.getElementById("info");

let index = 0;
let isPlaying = true;
let teacherMode = false;

let zoomOffset = 0;

const ZOOM_MIN = 5;    // ‡πÉ‡∏Å‡∏•‡πâ‡∏™‡∏∏‡∏î (‡∏ä‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)
const ZOOM_MAX = 120;  // ‡πÑ‡∏Å‡∏•‡∏™‡∏∏‡∏î
const ZOOM_STEP = 8;   // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á

const cameraDistances = [
  80,  // Sun
  20,  // Mercury
  20,  // Venus
  20,  // Earth
  20,  // Mars
  5,   // Jupiter
  20,  // Saturn
  55,  // Uranus
  55   // Neptune
];

const teacherContent = {
  "‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå": `
  ‚Ä¢ ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞<br>
  ‚Ä¢ ‡∏°‡∏ß‡∏•‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô ~99.8% ‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö<br>
  ‚Ä¢ ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡∏ô‡∏¥‡∏ß‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ü‡∏¥‡∏ß‡∏ä‡∏±‡∏ô
  `,
  "‡∏î‡∏≤‡∏ß‡∏û‡∏∏‡∏ò": `
  ‚Ä¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á<br>
  ‚Ä¢ ‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î ‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏±‡∏î<br>
  ‚Ä¢ ‡πÇ‡∏Ñ‡∏à‡∏£‡∏£‡∏≠‡∏ö‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
  `,
  "‡∏î‡∏≤‡∏ß‡∏®‡∏∏‡∏Å‡∏£‡πå": `
  ‚Ä¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á<br>
  ‚Ä¢ ‡∏´‡∏°‡∏∏‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏≠‡∏∑‡πà‡∏ô<br>
  ‚Ä¢ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 460¬∞C
  `,
  "‡πÇ‡∏•‡∏Å": `
  ‚Ä¢ ‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏î‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏á‡∏™‡∏µ
  `,
  "‡∏î‡∏≤‡∏ß‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£": `
  ‚Ä¢ ‡∏°‡∏µ‡∏£‡πà‡∏≠‡∏á‡∏£‡∏≠‡∏¢‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏≠‡∏î‡∏µ‡∏ï<br>
  ‚Ä¢ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏≠‡∏ß‡∏Å‡∏≤‡∏®<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞
  `,
  "‡∏î‡∏≤‡∏ß‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ": `
  ‚Ä¢ ‡∏î‡∏≤‡∏ß‡πÅ‡∏Å‡πä‡∏™‡∏¢‡∏±‡∏Å‡∏©‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏û‡∏≤‡∏¢‡∏∏ Great Red Spot<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
  `,
  "‡∏î‡∏≤‡∏ß‡πÄ‡∏™‡∏≤‡∏£‡πå": `
  ‚Ä¢ ‡∏ß‡∏á‡πÅ‡∏´‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏•‡∏∞‡∏´‡∏¥‡∏ô<br>
  ‚Ä¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô‡∏ï‡πà‡∏≥‡∏°‡∏≤‡∏Å<br>
  ‚Ä¢ ‡∏°‡∏µ‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå Titan
  `,
  "‡∏î‡∏≤‡∏ß‡∏¢‡∏π‡πÄ‡∏£‡∏ô‡∏±‡∏™": `
  ‚Ä¢ ‡πÅ‡∏Å‡∏ô‡πÄ‡∏≠‡∏µ‡∏¢‡∏á ~98 ‡∏≠‡∏á‡∏®‡∏≤<br>
  ‚Ä¢ ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏•‡∏¥‡πâ‡∏á‡∏£‡∏≠‡∏ö‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå<br>
  ‚Ä¢ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥‡∏°‡∏≤‡∏Å
  `,
  "‡∏î‡∏≤‡∏ß‡πÄ‡∏ô‡∏õ‡∏à‡∏π‡∏ô": `
  ‚Ä¢ ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞<br>
  ‚Ä¢ ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡πä‡∏≤‡∏ã‡∏°‡∏µ‡πÄ‡∏ó‡∏ô<br>
  ‚Ä¢ ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏≠‡∏ö‡πÇ‡∏Ñ‡∏à‡∏£ ~165 ‡∏õ‡∏µ‡πÇ‡∏•‡∏Å
  `
};

/* ===== ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ===== */
function showInfo(p){
  const name = p.dataset.name;

  info.innerHTML = `
    <b>${name}</b><br>
    ${p.dataset.info}

    ${teacherMode ? `
      <hr>
      <b>üéì ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏±‡πâ‡∏ô</b><br>
      <small style="display:block;text-align:left;">
        ${teacherContent[name] || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}
      </small>
    ` : ""}

    <hr>
    <small>
      ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${isPlaying ? "‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô" : "‚è∏ ‡∏´‡∏¢‡∏∏‡∏î"}<br>
      ‡πÇ‡∏´‡∏°‡∏î: ${teacherMode ? "‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏±‡πâ‡∏ô" : "‡∏õ‡∏Å‡∏ï‡∏¥"}
    </small>
  `;

  info.style.display = "block";
}

/* ===== ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏´‡∏°‡∏∏‡∏ô ===== */
function setupPlanetSpin(){
  planets.forEach(p=>{
    const baseRot = p.getAttribute("rotation") || {x:0,y:0,z:0};

    p.setAttribute("animation__spin", {
      property: "rotation",
      from: `${baseRot.x} ${baseRot.y} ${baseRot.z}`,
      to:   `${baseRot.x} ${baseRot.y + 360} ${baseRot.z}`,
      dur: 20000,
      easing: "linear",
      loop: true
    });
  });
}

/* ===== ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏î‡∏≤‡∏ß ===== */
function focusPlanet(i){
  index = i;              
  zoomOffset = 0;

  const planet = planets[i];
  const pos = planet.getAttribute("position");

  // ===== ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏•‡πâ‡∏≠‡∏á =====
  resetCameraView();

  cameraRig.removeAttribute("animation__move");
  cameraRig.removeAttribute("animation__spin");
  
  // ===== ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á =====
  cameraRig.setAttribute("animation__move", {
    property: "position",
    to: `${pos.x} 1.6 ${pos.z + cameraDistances[i]}`,
    dur: 1400,
    easing: "easeInOutCubic"
  });

  // ===== ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á (effect ‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏î‡∏≤‡∏ß) =====
  cameraRig.setAttribute("animation__spin", {
    property: "rotation",
    from: "0 0 0",
    to: "0 360 0",
    dur: 1000,
    easing: "easeInOutSine"
  });

  // ===== ‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏´‡∏°‡∏∏‡∏ô‡∏î‡∏≤‡∏ß =====
  planets.forEach(p=>{
    p.setAttribute("animation__spin", "enabled", true);
    p.setAttribute("animation__spin", "dur", 20000);
  });

  planet.setAttribute("animation__spin", "dur", 8000);

  // ===== ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• =====
  showInfo(planet);
}


/* ===== ‡∏õ‡∏∏‡πà‡∏° ===== */
function nextPlanet(){
  index = (index+1)%planets.length;
  focusPlanet(index);
}
function prevPlanet(){
  index = (index-1+planets.length)%planets.length;
  focusPlanet(index);
}

/* ===== ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏≤‡∏ß ===== */
planets.forEach(p=>{
  p.addEventListener("click", ()=>{
    index = Array.from(planets).indexOf(p);
    focusPlanet(index);
  });
});

/* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
setupPlanetSpin();

function togglePlay(){
  isPlaying = !isPlaying;

  planets.forEach(p=>{
    p.setAttribute("animation__spin","enabled",isPlaying);
  });

  showInfo(planets[index]);
}

function toggleTeacher(){
  teacherMode = !teacherMode;
  const camera = cameraRig.querySelector("a-camera");
  if(teacherMode){
    isPlaying = false;
    camera.setAttribute("look-controls","enabled",false);
    planets.forEach(p=>{
      p.setAttribute("animation__spin","enabled",false);
    });

  }else{
    isPlaying = true;
    camera.setAttribute("look-controls","enabled",true);
    planets.forEach(p=>{
      p.setAttribute("animation__spin","enabled",true);
      p.setAttribute("animation__spin","dur",20000);
    });
  }
  showInfo(planets[index]);
}

function startJourney(){
  document.getElementById("intro").style.display = "none";

  index = 0;       
  isPlaying = true;
  teacherMode = false;

  planets.forEach(p=>{
    p.setAttribute("animation__spin","enabled",true);
  });

  focusPlanet(0);
}

function resetCameraView(){
  const camera = cameraRig.querySelector("a-camera");

  camera.setAttribute("look-controls","enabled",false);

  cameraRig.object3D.rotation.set(0,0,0);
  camera.object3D.rotation.set(0,0,0);

  setTimeout(()=>{
    camera.setAttribute("look-controls","enabled",true);
  },50);
}

function zoomIn(){
  if(isMobile()) return; 
  zoomOffset = Math.max(zoomOffset - ZOOM_STEP, -ZOOM_MAX);
  applyZoom();
}

function zoomOut(){
  if(isMobile()) return; 
  zoomOffset = Math.min(zoomOffset + ZOOM_STEP, ZOOM_MAX);
  applyZoom();
}

function applyZoom(){
  const planet = planets[index];
  const pos = planet.getAttribute("position");

  const baseDist = cameraDistances[index];
  const finalDist = Math.max(baseDist + zoomOffset, ZOOM_MIN);

  cameraRig.removeAttribute("animation__move");

  cameraRig.setAttribute("animation__move", {
    property: "position",
    to: `${pos.x} 1.6 ${pos.z + finalDist}`,
    dur: 400,
    easing: "easeOutQuad"
  });
}
  
function isMobile(){
  return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}
</script>

</a-scene>
<div id="intro">
  <h1>üåå ‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞‡∏≠‡∏±‡∏ô‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà</h1>
  <p>‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞<br>‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ AR</p>
  <button onclick="startJourney()">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</button>
</div>
</body>
</html>



